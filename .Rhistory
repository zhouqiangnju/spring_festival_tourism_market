set_config(config(ssl_verifypeer=0L))
url <- paste0('https://kyfw.12306.cn/otn/lcxxcx/query?purpose_codes=ADULT&queryDate=',date,
'&from_station=',from,'&to_station=',to)
r <- GET(url)
json_str <- content(r,as= 'text',encoding = 'UTF-8')
json_str
install.packages('mapproj')
library(mapproj)
map<-get_map(location='China',zomm=4)
install.packages('ggmap')
library(ggmap)
map<-get_map(location='China',zomm=4)
map<-get_map(location='China',zoom=4)
library(Rcurl)
library(rcurl)
library(rvest)
install_github(repo= "Rwebdriver", username = "crubba")
devtools::install_github(repo= "Rwebdriver", username = "crubba")
library("XML")
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(sf)
library(ggplot2)
system.time()
Sys.Date()
?sapply
get.index<-function(date,time){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),sep = '')
time<-c('9:30','11:30','13:30','15:30')
search.url<-sapply(time,paste,date.url,sep='')
}
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),sep = '')
time<-c('9:30','11:30','13:30','15:30')
search.url<-sapply(time,paste,date.url,sep='')
return(search.url)
}
p<-get.index
View(p)
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),sep = '')
time<-c('9:30','11:30','13:30','15:30')
search.url<-sapply(time,paste,date.url,sep='')
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),sep = '')
time<-c('9:30','11:30','13:30','15:30')
search.url<-sapply(time,paste,date.url,sep='')
?paste
?apply
sapply
?sapply
search.url<-paste(date.url,time,sep='')
index<-getURL(search.url)
index.table<-getURL(search.url) %>% content(as='text',encoding='UTF-8')
library("XML")
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(jsonlite)
library(httr)
library(dplyr)
library(RColorBrewer)
library(scales)
library(pheatmap)
index.table<-getURL(search.url) %>% content(as='text',encoding='UTF-8')
index.table<-getURL(search.url)
content(index.table,as='text',encoding='UTF-8')
content(index.table[1],as='text',encoding='UTF-8')
index.table[1]
index.table<-getURL(search.url,.encoding="utf-8") %>% readHTMLTable(stringAsFactors = FALSE)
index.table[[3]]
library("dplyr")
index.table<-getURL(search.url[1],.encoding="utf-8") %>% readHTMLTable(stringAsFactors = FALSE)
url<-'http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=2018-02-15&releasedate=9:30'
index.table<-getURL(url,.encoding="utf-8") %>% readHTMLTable(stringAsFactors = FALSE)
index.table<-getURL(url,.encoding="utf-8") %>% readHTMLTable(stringAsFactors = FALSE)
search.url
library("XML")
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(sf)
library(ggplot2)
library(jsonlite)
library(httr)
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
search.url<-paste(date.url,time,sep='')
index.table<-paste(date.url,time,sep='') %>% getURL(.encoding="utf-8") %>% readHTMLTable(stringAsFactors = FALSE)
content(index.table[1],as='text',encoding='UTF-8')
index.table<-paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")
content(index.table[1],as='text',encoding='UTF-8')
index.table<-paste(date.url,time,sep='') %>% GET(.encoding="utf-8")
index.table<-paste(date.url,time,sep='')[1] %>% GET(.encoding="utf-8")
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<-paste(date.url,time,sep='')[1] %>% GET(.encoding="utf-8")
content(index.table,as='text',encoding='UTF-8')
index.table<-paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")
index.table<-paste(date.url,time,sep='') %>% getURL(.encoding="utf-8") %>% readHTMLTable(stringAsFactors = FALSE)
?html_nodes
index.table%>%read_html(index.link)
index.link<-paste(date.url,time,sep='')
index.table%>%read_html(index.link)
?read_html
library(xml2)
index.table%>%read_html(index.link,encoding= 'UTF-8')
index.table%>%read_html(index.link,encoding= 'UTF-8')
index.table%>%read_html(index.link[1],encoding= 'UTF-8')
class(index.link)
url<-'http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=2018-02-15&releasedate=9:30'
index.table%>%read_html(url,encoding= 'UTF-8')
index.table%>%index.link %>% getURL(.encoding="utf-8")
index.table<- index.link %>% getURL(.encoding="utf-8")
index.table<- index.link %>% getURL(.encoding="utf-8")  %>% html_nodes('td')
index.table
index.table<- index.link %>% getURL(.encoding="utf-8")  %>% content(as='text')
index.table<- index.link %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index.table[[3]]
index.table[[5]]
index.table[[12]]
order<-c(5,12,19,26)
?[[
index<-index.table[[c]]
?sapply
index<-list(index.table(5),index.table(12),index.table(19),index.table(26))
index<-list(index.table[[5]],index.table[[12]],index.table[[19]],index.table[[26]])
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index<-list(index.table[[5]],index.table[[12]],index.table[[19]],index.table[[26]])
return(index)
}
p<-get.index
p<-get.index()
view(p)
p[[4]]
t<-p[[4]]
View(t)
devtools::install_github("rlist","renkun-ken")
library(rlist)
t<-p[[4]]$景区名称
url<-"http://61.155.108.87/jslyzw/front/show/det_show.do?iid=66&name=%E5%B8%B8%E5%B7%9E%E6%98%A5%E7%A7%8B%E6%B7%B9%E5%9F%8E%E6%97%85%E6%B8%B8%E5%8C%BA%EF%BC%88%E6%98%A5%E7%A7%8B%E4%B9%90%E5%9B%AD%EF%BC%89%EF%BC%885A%EF%BC%89&releasedate=15:30&releasenyr=2018-02-11"
t<-as.character(p[[4]]$景区名称)
jqgeo<-read.csv('jqgeonew.csv')
jqgeo<-read.csv('C:/Users/zhouq/Documents/GitHub/Jiangsu-Tourism-Attraction-Analysis/jqgeonew.csv')[,-1]
View(jqgeo)
jqgeo<-read.csv('C:/Users/zhouq/Documents/GitHub/Jiangsu-Tourism-Attraction-Analysis/jqgeonew.csv')[,c(7,8,9)]
View(jqgeo)
jqgeo<-read.csv('C:/Users/zhouq/Documents/GitHub/Jiangsu-Tourism-Attraction-Analysis/jqgeonew.csv')[,c(8,9,10)]
View(jqgeo)
match(jqgeo$Name,t)
match(t,jqgeo$Name)
View(jqgeo)
t<-as.character(p[[4]]$景区名称) %>% strsplit('(')
t<-as.character(p[[4]]$景区名称) %>% strsplit('\(')
t<-sub(".5A.|.4A.","",t)
t
keyword<-t
list.map(p,'景区名称')
?`rlist-package`
library(jsonlite)
library(httr)
library(dplyr)
library("XML")
library(xml2)
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(sf)
library(ggplot2)
library(jsonlite)
library(httr)
library(rlist)
library('pipeR')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
str(index.table)
index.table[[3]]
index.table[[4]]
list.merge(index.table[[4]],index.table[[5]])
tu<- list.merge(index.table[[4]],index.table[[5]])
names(tu)
names(tu)<-c("time",'Name',"Visitor",'index')
tu$Name
tu$time
tu<-sapply(tu,as.character())
tu<-lapply(tu,as.character())
tu<-lapply(tu,character())
?lapply
tu$time<-as.character(tu$time)
tu$time
lapply(tu,as.character())
index.list<-list(index.table[[5]],index.table[[12]],index.table[[19]],index.table[[26]])
list.names(index.list)
dim(index.list)
library("XML")
library(xml2)
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(sf)
library(ggplot2)
library(httr)
library(jsonlite)
library(rlist)
library('pipeR')
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
str(index.table)
?character
tu<- list.merge(index.table[[4]],index.table[[5]])
names(tu)<-c("Tag",'Name',"Visitor",'index')
lapply(tu,as.character)
tu<- lapply(tu,as.character)
library(rlist)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]])
}
index.list<- index.list %>% lapply(as.character)
names(index.list)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]])
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
}
index.list<- index.list %>% lapply(as.character)
p<-get.index()
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]])
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
}
index.list<- index.list %>% lapply(as.character)
return(index.list)
}
p<-get.index()
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]])
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
}
index.list<- index.list %>% lapply(as.character)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
}
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
}
return(index.list)
}
p<-get.index()
list.cases(p,Name)
index.list[[1]]<-sub('发布时间：','',index.list[[1]])
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[1]]$Tag<-sub('发布时间：','',index.list[[1]]$Tag)
}
index.list[[1]]$Tag
index.list[[1]]$Tag<-sub('发布时间：|""','',index.list[[1]]$Tag)
strsplit(index.list[[1]]$Tag,'\p{Z}')
strsplit(index.list[[1]]$Tag,'\\p{Z}')
strsplit(index.list[[1]]$Tag,'\\p{Z}')
strsplit(index.list[[1]]$Tag,'\\s')
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-sub('发布时间：|""','',index.list[[i]]$Tag)
index.list[[i]]$Tag<-strsplit(index.list[[1]]$Tag,'\\s')
}
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-sub('发布时间：|""','',index.list[[i]]$Tag)
index.list[[i]]$Tag<-strsplit(index.list[[i]]$Tag,'\\s')
}
index.list[[1]]$Tag<-sub('发布时间：|\"\"','',index.list[[1]]$Tag)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[1]]$Tag<-sub('发布时间：|\"\"','',index.list[[1]]$Tag)
index.list[[i]]$Tag<-strsplit(index.list[[i]]$Tag,'\\s')
}
index.list[[1]]$Tag
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-sub('发布时间：','',index.list[[i]]$Tag) %>% strsplit('\\s')
}
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
return(index.list)
}
p<-get.index()
name<-list.cases(p,Name)
jqgeo<-read.csv('C:/Users/zhouq/Documents/GitHub/Jiangsu-Tourism-Attraction-Analysis/jqgeonew.csv')[,c(8,9,10)]
library("XML")
library(xml2)
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(sf)
library(ggplot2)
library(jsonlite)
library(httr)
library(rlist)
library('pipeR')
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index.list<-list()
for(i in 1:2){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
return(index.list)
}
p<-get.index()
p[[2]]
library("XML")
library(xml2)
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(sf)
library(ggplot2)
library(jsonlite)
library(httr)
library(rlist)
library('pipeR')
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index.list<-list()
for(i in 1:2){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
return(index.list)
}
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index.list<-list()
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
return(index.list)
}
p<-get.index()
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index.list<-list()
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
names(index.list[[i]])
index.list[[3]]
index.list[[2]]
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index.list<-list()
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
return(index.list)
}
p<-get.index()
get.index<-function(){
date.url<-paste('http://61.155.108.87/jslyzw/front/show/all_show.do?releasenyr=',Sys.Date(),'&releasedate=',sep = '')
time<-c('9:30','11:30','13:30','15:30')
index.table<- paste(date.url,time,sep='') %>% getURL(.encoding="utf-8")  %>% readHTMLTable(stringAsFactors = FALSE)
index.list<-list()
for(i in 1:4){
index.list[[i]]<-list.merge(index.table[[(i-1)*7+4]],index.table[[(i-1)*7+5]]) %>% lapply(as.character)
if(length(names(index.list[[i]]))==4){
names(index.list[[i]])<-c("Tag",'Name',"Visitor",'index')
index.list[[i]]$Tag<-index.list[[i]]$Tag %>% str_replace('发布时间：','') %>% strsplit('\\s')
}
}
return(index.list)
}
p<-get.index()
jqname<-list.cases(p,Name)
install.packages('UScensus2010')
library('UScensus2010')
setup<-function(){
library(Rmisc)
library("XML")
library(xml2)
library("stringr")
library("RCurl")
library("dplyr")
library("rvest")
library(sf)
library(ggplot2)
library(jsonlite)
library(httr)
library(rlist)
library(leaflet)
library(RColorBrewer)
library(ggthemes)
library('showtext')
library(scales)
library(grid)
library(Cairo)
library(showtextdb)
}
setup()
showtext_auto()
font_add('SimSun','simsun.ttc')
font_add('msyh',regular = 'msyh.ttc',
bold = 'msyhbd.ttc')
setwd('~/GitHub/spring_festival_tourism_market')
pal.income <- brewer.pal(9,name = 'Reds')
pal.visitor<-brewer.pal(9,name = 'GnBu')
spri.data <- read.csv('spring_data.csv',stringsAsFactors = FALSE)[,-1]
china.map<-st_read('china.geojson',stringsAsFactors = FALSE)
Encoding(china.map$name)<-'UTF-8'
sdm <- merge(spri.data,china.map,by.x = 'province',by.y = 'name',all = TRUE) %>%
st_sf(stringsAsFactors = FALSE,crs = 4326,sf_column_name = 'geometry')
sdm$income<-as.numeric(sdm$income)
sdm$gr.i<-as.numeric(sdm$gr.i)
sdm$vistor<-as.numeric(sdm$vistor)
sdm$gr.v<-as.numeric(sdm$gr.v)
total.income <-ggplot(sdm)+
geom_sf(aes(fill = income))+
scale_fill_gradient(name='旅游收入：亿元',low = pal.income[1] , high = pal.income[9] ,
guide = 'colorbar',na.value = 'grey50',breaks=pretty_breaks(n=5))+
ggtitle('2018春节旅游市场')+
theme(text = element_text(family = 'msyh'))
p<-total.income
cairo_pdf('fonttest1.pdf')
showtext.begin()
showtext_begin()
p
showtext.end()
dev.off()
frame_1<-
theme(legend.position="right",
axis.title = element_blank(),
axis.text = element_blank(),
panel.background = element_blank(),
panel.grid = element_blank())
cairo_pdf('fonttest2.pdf')
showtext_begin()
p+frame_1
showtext_end()
dev.off()
cairo_pdf('fonttest3.pdf')
showtext_auto()
p+frame_1
dev.off()
showtext_auto()
font_add('SimSun','simsun.ttc')
font_add('msyh',regular = 'msyh.ttc',
bold = 'msyhbd.ttc')
cairo_pdf('fonttest3.pdf')
cairo_pdf('fonttest4.pdf')
p+frame_1
dev.off()
